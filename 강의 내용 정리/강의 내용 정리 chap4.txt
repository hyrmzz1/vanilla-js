#4.0
html에서 form과 그 내부에 input, button 생성하고, js가 처리하도록 해보자
=>querySelector 사용하여 js에 form 및 input, btn 끌고와야 함.

btn 클릭할 때마다 (click 이벤트 적용) 콘솔이나 알림으로 뜨도록 해보자.

input value를 얻기 위해선?
console.dir 사용하여 input 안에 value 라는 property가 있단걸 확인하는게 우선.

#4.1 username의 유효성을 검사하자.
1) username은 반드시 작성되어 있어야 하고
2) 길이 제한도 걸자.

const loginInput = document.querySelector("#login-form input");
const loginButton = document.querySelector("#login-form button");
const username = loginInput.value;	//input에 작성된 값 가져오기

if-else if-else 문을 통해 입력받은 username의 작성유무, 길이 등을 판별하여 alert 등을 표시할 수 있다.
// loginInput.value는 반복적으로 사용되므로 function 내부에서 변수화하자.

String의 길이를 구하는 법? stringName.length

그러나 input의 작성유무, 길이 등은 html에서 자체적으로 required나 maxlength 등을 통해 할 수 있다.
// 위와 같은 input의 유효성 검사를 작동시키기 위해서는 input 이 form tag 내부에 있어야 한다.

form이 submit되면 웹사이트가 새로고침 된다.
"form 안에서 엔터를 누르고 input이 더이상 존재하지 않는다면 자동으로 submit된다."	// lec#4.1 commit 주석 참고
-> btn의 click이 아닌 submit에 신경써보자
-> submit을 막아야 한다!!

#4.2
btn에 대한 click event 말고, login-form 자체에 대해 submit event 발생여부 확인해서 막아버리자!
//submit은 엔터를 누르거나 버튼을 클릭할 때 발생한다.

브라우저의 기본 동작 : 엔터를 누를 때 새로고침을 하고 form을 submit한다.
-> 이렇게 되면 입력받은 input value도 새로고침과 함께 사라짐.
새로고침이 안되도록 하려면?

const loginForm = document.querySelector("#login-form");
const loginInput = document.querySelector("login-form input");

function onLoginSubmit(event){
	event.preventDefault();
	//브라우저의 기본동작을 막아줌
	//기본 동작이란 어떤 function에 대해 브라우저가 기본적으로 수행하는 동작.
	console.log(event);
}//event argument.......... 모든 eventListener의 첫번째 인수는 지금 막 벌어진 일들에 대한 정보.!

loginForm.addEventListener("submit", onLoginSubmit);

#4.3
기본동작 막아보자
form의 기본동작? submit.
링크의 기본동작? 클릭시 다른 페이지로 이동하는 것.
기본동작 막는 이유? 무엇이, 어디가 클릭됐는지 info 알고 싶을 때가 있으니까.
=> JS가 함수 실행시키는 동시에 해당 함수 첫 인자로 object 넣어주면 된다.

index.html
<a href = "~~">Go</a>

app.js
const loginForm = document.querySelector("#login-form");
const loginInput = document.querySelector("login-form input");
const link = document.querySelector("a");	//링크 찾았다

function onLoginSubmit(event){
	event.preventDefault();	//브라우저의 기본동작을 막아줌
	const username = loginInput.value;	//새로고침 안됨
	console.log(username);
}//tomato argument.......... 모든 eventListener의 첫번째 인수는 지금 막 벌어진 일들에 대한 정보.!

function handleLinkClick(event){	//JS가 함수 실행 + 해당 함수 첫 인자로 object 넣어주면 된다.
	event.preventDefault();	//브라우저의 기본동작 막아줌.	
	console.dir(event);
	//alert("clicked!");	//클릭시 알림 뜸. ok 눌러서 alert 사라지면 브라우저의 기본동작=> 링크 연결되서 다른 페이지로 연결됨.

}

loginForm.addEventListener("submit", onLoginSubmit);
link.addEventListener("click", handleLinkClick);

*정리
addEventListener()안의 함수는 직접이 아닌 브라우저가 실행시키고, 브라우저에서 해당 이벤트에 대한 object(정보)를 가지게 된다.
addEventListener()안 함수에서 object에 대한 자리를 할당해주면 (ex; onLoginSubmit(event), handleLinkClick(event))
해당 이벤트가 발생시킨 정보들에 대한 object들을 볼 수 있다. => ex; console.log(event), console.dir(event)
이 때, 해당 이벤트가 가진 기본동작(default)들을 발생시키지 않으려면 (ex; submit 클릭시 새로고침, link click시 다음 페이지로 이동)
preventDefault() 이용하면 된다.

#4.4 getting username
유저가 input에 username을 제출하면 해당 form을 없애보자.
sol 1) html 자체를 없앤다
sol 2) css를 이용해 숨긴다 => hidden이란 classname 더해주기
<style.css>
.hidden{
	display: none;	
	//visibility: hidden; 은 공간은 그대로 두고 보이지 않게 하는 것. display: none; 은 공간까지 사라지면서 안보이게 하는 것.
}

<app.js>
const loginForm = document.querySelector("#login-form");
const loginInput = document.querySelector("login-form input");
const greeting = document.querySelector("#greeting");
const HIDDEN_CLASSNAME = "hidden";	
//변수명 대문자로 쓰는 경우? (일반적으로는) 1. string만 포함된 변수. string을 저장하고 싶을 때 사용. 2. loginForm, loginInput처럼 중요한 정보를 담지 않았을 때. (중요한 변수 아닐 때)

function onLoginSubmit(event){
	event.preventDefault();	//브라우저의 기본동작을 막아줌
	const username = loginInput.value;	//새로고침 안됨
	loginForm.classList.add(HIDDEN_CLASSNAME);
	console.log(username);	//loginForm 안뜨지만 콘솔엔 뜬다.
	greeting.innerText = "Hello "+username;	//`Hello ${username}` 과 같음. ${} 안에 변수명 들어가면 된다. ``<-백틱 이라고 한다! 백틱으로 전체 감싸주기.
	greeting.classList.remove(HIDDEN_CLASSNAME);
}

loginForm.addEventListener("submit", onLoginSubmit);

<index.html>
<h1 id="greeting" class="hidden"></h1>	//원래 파일에 추가.	//form은 숨기고 h1은 텍스트가 있을 때만 표시되도록 해보자.

#4.5 saving username
입력받은 username을 기억해보자.
브라우저에 무언가를 기억할 수 있게 해주는 API는 local storage!
검사 에서 application 들어가면 Local Storage 볼 수 있음.

Local Storage API method 사용해보자 (in console) 	method(key, value)
localStorage.setItem("username", "nico")	//username 에 nico라는 값 저장
localStorage.getItem("username")		//nico. 저장된 값 가져옴
localStorage.removeItem("username")		//저장된 값 지움

#4.6 loading username 어려워!!
local storage가 비어있다면 => form 보여주면서 앞 강의에서 했던대로 쭉~
local storage에 user 정보가 있다면 => form 숨기고 h1 요소 보여주기

1) local storage에 user 정보 유무 확인하기
<app.js>
const loginForm = document.querySelector("#login-form");
const loginInput = document.querySelector("login-form input");
const greeting = document.querySelector("#greeting");
const HIDDEN_CLASSNAME = "hidden";	
//변수명 대문자로 쓰는 경우? (일반적으로는) 1. string만 포함된 변수. string을 저장하고 싶을 때 사용. 2. loginForm, loginInput처럼 중요한 정보를 담지 않았을 때. (중요한 변수 아닐 때)
const USERNAME_KEY = "username";	//두번 이상 사용되는 string 무조건 변수화 (실수하면 안되는 string 이니까!!)

function onLoginSubmit(event){
	event.preventDefault();	//브라우저의 기본동작을 막아줌
	const username = loginInput.value;	//새로고침 안됨
	loginForm.classList.add(HIDDEN_CLASSNAME);
	console.log(username);	//loginForm 안뜨지만 콘솔엔 뜬다.
	localStorage.setItem(USERNAME_KEY)
	/*greeting.innerText = "Hello "+username;	//`Hello ${username}` 과 같음. ${} 안에 변수명 들어가면 된다. ``<-백틱 이라고 한다! 백틱으로 전체 감싸주기.
	greeting.classList.remove(HIDDEN_CLASSNAME);*/
	paintGreetings(username);
}

loginForm.addEventListener("submit", onLoginSubmit);

const savedUsername = localStorage.getItem(USERNAME_KEY);

//html에서 form이랑 greeting 모두 숨긴 채로 시작하는게 나을듯. =>hidden 넣어주기
if (savedUsername === null){		//JS에선 ==대신 === 사용
	//show the form
	loginForm.classList.remove(HIDDEN_CLASSNAME);
	loginForm.addEventListener("submit", onLoginSubmit);
}else{
	//show the greetings
	/*greeting.innerText = "Hello "+username;9 
	greeting.classList.remove(HIDDEN_CLASSNAME);*/ //위랑 똑같은 코드이므로 함수로 만들어버리자. =>function paintGreetings(username){} 안에 이 코드 넣어버리자
	paintGreetings(username);
}

새로고침 해도 input 에 작성한 username 저장되기 때문에 form 안뜨고 hello username 이라는 h1 만 뜬다.

#4.7 SUPER recap